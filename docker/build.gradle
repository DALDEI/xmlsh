buildscript {
 repositories() { 
   jcenter()
  }
  dependencies {
    classpath 'com.bmuschko:gradle-docker-plugin:3+'
  }

}
apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'com.bmuschko.docker-java-application'
version = '1.0'
sourceCompatibility = '1.8'

repositories {
  jcenter()
        maven {
            url rootProject.getProperty("xmlsh.awsRepoBucket") + "/maven2"
            credentials(AwsCredentials) {
                accessKey rootProject.getProperty("xmlsh.awsAccessKey")
                secretKey rootProject.getProperty("xmlsh.awsSecretKey")
            }
        }
}
dependencies {
  compile 'org.xmlsh:xmlsh:2.0@zip'
}

docker {
   url = System.getenv("DOCKER_HOST")
   certPath =  new File( System.getenv("DOCKER_CERT_PATH") )
/*
DOCKER_HOST=tcp://rancher:2376
DOCKER_MACHINE_NAME=rancher
DOCKER_TLS_VERIFY=1
DOCKER_CERT_PATH=/Users/dlee/.docker/machine/machines/rancher
DOCKER_REGISTRY=nexstra-docker-dockerv2-local.artifactoryonline.com
*/
}
mainClassName = 'org.xmlsh.sh.shell.Shell'

docker {
  javaApplication {
    maintainer = 'David lee "dlee@xmlsh.org"'
  }
}
